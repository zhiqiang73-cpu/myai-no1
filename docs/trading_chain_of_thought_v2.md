# BTCUSDTæ°¸ç»­åˆçº¦ - å¼ºåŒ–å­¦ä¹ äº¤æ˜“æ€ç»´é“¾è®¾è®¡ V2

## æ ¸å¿ƒæ”¹è¿›ï¼šæ—¥å¿—è®°å½• + æ¨¡å‹è¿›åŒ– + æ”¯æ’‘é˜»åŠ›è‡ªåŠ¨å‘ç°

---

## ä¸€ã€æ ¸å¿ƒç›®æ ‡é‡æ–°å®šä¹‰

### 1.1 ä½ çš„ç›®æ ‡
> é€šè¿‡ä¸æ–­äº¤æ˜“ï¼Œè‡ªåŠ¨å‘ç°æ”¯æ’‘ä½å’Œé˜»åŠ›ä½ï¼Œä¼˜åŒ–èƒœç‡å’Œç›ˆäºæ¯”ï¼Œæå‡æ¯ç¬”äº¤æ˜“ç›ˆåˆ©ã€‚

### 1.2 æ‹†è§£ä¸ºå¯å­¦ä¹ çš„å­ç›®æ ‡

```
ç›®æ ‡1: æ”¯æ’‘é˜»åŠ›å‘ç°
â”œâ”€â”€ å­¦ä¹ è¯†åˆ«ä»·æ ¼åè½¬çš„å…³é”®ä½ç½®
â”œâ”€â”€ è®°å½•æ¯æ¬¡åœ¨æŸä»·ä½äº¤æ˜“çš„ç»“æœ
â””â”€â”€ ç»Ÿè®¡å“ªäº›ä»·ä½æˆåŠŸç‡é«˜ï¼Œå½¢æˆ"ä»·æ ¼è®°å¿†"

ç›®æ ‡2: èƒœç‡ä¼˜åŒ–
â”œâ”€â”€ è®°å½•æ¯ç§å…¥åœºæ¡ä»¶çš„èƒœç‡
â”œâ”€â”€ æ·˜æ±°ä½èƒœç‡çš„å…¥åœºæ¨¡å¼
â””â”€â”€ å¼ºåŒ–é«˜èƒœç‡çš„å…¥åœºæ¨¡å¼

ç›®æ ‡3: ç›ˆäºæ¯”ä¼˜åŒ–
â”œâ”€â”€ å­¦ä¹ æœ€ä½³æ­¢ç›ˆæ­¢æŸä½ç½®
â”œâ”€â”€ æ ¹æ®æ”¯æ’‘é˜»åŠ›åŠ¨æ€è°ƒæ•´ç›®æ ‡
â””â”€â”€ è®©ç›ˆåˆ©å•è·‘å¾—æ›´è¿œï¼ŒäºæŸå•åŠæ—¶æ­¢æŸ
```

---

## äºŒã€æ—¥å¿—è®°å½•ç³»ç»Ÿè®¾è®¡

### 2.1 ä¸‰å±‚æ—¥å¿—æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ—¥å¿—ç³»ç»Ÿæ¶æ„                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Layer 1: äº¤æ˜“æ—¥å¿— (Trade Log)                               â”‚
â”‚  â”œâ”€â”€ æ¯ç¬”äº¤æ˜“çš„å®Œæ•´è®°å½•                                       â”‚
â”‚  â”œâ”€â”€ å…¥åœºä»·ã€å‡ºåœºä»·ã€ç›ˆäºã€æŒä»“æ—¶é—´                            â”‚
â”‚  â”œâ”€â”€ å…¥åœºæ—¶çš„å¸‚åœºçŠ¶æ€å¿«ç…§                                     â”‚
â”‚  â””â”€â”€ å­˜å‚¨: trades.db (SQLite)                               â”‚
â”‚                                                             â”‚
â”‚  Layer 2: å­¦ä¹ æ—¥å¿— (Learning Log)                            â”‚
â”‚  â”œâ”€â”€ æ¯ä¸ªè®­ç»ƒå‘¨æœŸçš„æŒ‡æ ‡                                       â”‚
â”‚  â”œâ”€â”€ æŸå¤±å‡½æ•°ã€å¥–åŠ±æ›²çº¿ã€æ¢ç´¢ç‡                               â”‚
â”‚  â”œâ”€â”€ æ¨¡å‹å‚æ•°å˜åŒ–                                            â”‚
â”‚  â””â”€â”€ å­˜å‚¨: tensorboard + learning.log                       â”‚
â”‚                                                             â”‚
â”‚  Layer 3: çŸ¥è¯†åº“ (Knowledge Base)                            â”‚
â”‚  â”œâ”€â”€ å‘ç°çš„æ”¯æ’‘é˜»åŠ›ä½                                         â”‚
â”‚  â”œâ”€â”€ æœ‰æ•ˆçš„å…¥åœºæ¨¡å¼                                          â”‚
â”‚  â”œâ”€â”€ ç»Ÿè®¡è§„å¾‹å’Œç»éªŒæ€»ç»“                                       â”‚
â”‚  â””â”€â”€ å­˜å‚¨: knowledge.json                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 äº¤æ˜“æ—¥å¿—è¯¦ç»†å­—æ®µ

```python
TradeLog = {
    # åŸºç¡€ä¿¡æ¯
    "trade_id": "uuid",
    "timestamp_open": "2024-01-07 20:30:00",
    "timestamp_close": "2024-01-07 21:15:00",
    
    # äº¤æ˜“ä¿¡æ¯
    "direction": "LONG",  # LONG/SHORT
    "entry_price": 92000.0,
    "exit_price": 92500.0,
    "quantity": 0.01,
    "leverage": 10,
    
    # ç»“æœ
    "pnl": 50.0,  # USDT
    "pnl_percent": 5.43,  # %
    "is_win": True,
    "hold_duration_minutes": 45,
    
    # å…¥åœºæ—¶å¸‚åœºçŠ¶æ€ (ç”¨äºå¤ç›˜åˆ†æ)
    "market_state": {
        "trend_1w": "UP",
        "trend_8h": "UP", 
        "trend_15m": "SIDEWAYS",
        "rsi_15m": 45.2,
        "distance_to_support": 0.5,  # %
        "distance_to_resistance": 1.2,  # %
        "volatility": 0.8,
    },
    
    # å…¥åœºç†ç”± (æ€ç»´é“¾è¾“å‡º)
    "entry_reason": {
        "signal_type": "SUPPORT_BOUNCE",
        "confidence": 0.75,
        "risk_reward_ratio": 2.5,
    },
    
    # å‡ºåœºç†ç”±
    "exit_reason": "TAKE_PROFIT",  # TAKE_PROFIT/STOP_LOSS/SIGNAL_REVERSE/MANUAL
    
    # å…³é”®ä»·ä½è®°å½•
    "key_levels": {
        "entry_support": 91800.0,
        "entry_resistance": 93000.0,
        "stop_loss": 91500.0,
        "take_profit": 93000.0,
    }
}
```

### 2.3 çŸ¥è¯†åº“ç»“æ„

```python
KnowledgeBase = {
    # æ”¯æ’‘é˜»åŠ›ä½è®°å¿†
    "price_levels": {
        "91500": {
            "type": "SUPPORT",
            "touch_count": 5,      # è§¦åŠæ¬¡æ•°
            "bounce_count": 4,     # åå¼¹æ¬¡æ•°
            "break_count": 1,      # çªç ´æ¬¡æ•°
            "success_rate": 0.8,   # ä½œä¸ºæ”¯æ’‘çš„æˆåŠŸç‡
            "avg_bounce_size": 1.2, # å¹³å‡åå¼¹å¹…åº¦%
            "last_touch": "2024-01-07",
            "strength": "STRONG",  # STRONG/MEDIUM/WEAK
        },
        "95000": {
            "type": "RESISTANCE",
            "touch_count": 3,
            "bounce_count": 2,
            "break_count": 1,
            "success_rate": 0.67,
            "strength": "MEDIUM",
        }
    },
    
    # å…¥åœºæ¨¡å¼ç»Ÿè®¡
    "entry_patterns": {
        "SUPPORT_BOUNCE": {
            "total_trades": 50,
            "wins": 32,
            "losses": 18,
            "win_rate": 0.64,
            "avg_win": 1.5,  # %
            "avg_loss": 0.8, # %
            "profit_factor": 2.67,
            "best_conditions": {
                "trend_alignment": True,
                "rsi_range": [30, 45],
                "volume_confirm": True,
            }
        },
        "RESISTANCE_SHORT": {...},
        "BREAKOUT_LONG": {...},
        "BREAKOUT_SHORT": {...},
    },
    
    # æœ€ä¼˜å‚æ•°è®°å½•
    "optimal_params": {
        "stop_loss_atr_multiplier": 1.5,
        "take_profit_atr_multiplier": 3.0,
        "position_size_volatility_factor": 0.02,
        "min_risk_reward_ratio": 2.0,
    },
    
    # è¿›åŒ–å†å²
    "evolution_history": [
        {
            "generation": 1,
            "date": "2024-01-01",
            "total_trades": 100,
            "win_rate": 0.45,
            "profit_factor": 1.1,
            "sharpe_ratio": 0.5,
        },
        {
            "generation": 2,
            "date": "2024-01-07",
            "total_trades": 200,
            "win_rate": 0.52,
            "profit_factor": 1.4,
            "sharpe_ratio": 0.9,
        }
    ]
}
```

---

## ä¸‰ã€æ”¯æ’‘é˜»åŠ›è‡ªåŠ¨å‘ç°æœºåˆ¶

### 3.1 å‘ç°ç®—æ³•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ”¯æ’‘é˜»åŠ›ä½è‡ªåŠ¨å‘ç°æµç¨‹                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Step 1: åˆå§‹è¯†åˆ« (æŠ€æœ¯åˆ†æ)                                  â”‚
â”‚  â”œâ”€â”€ å±€éƒ¨é«˜ä½ç‚¹æ£€æµ‹ (Pivot Points)                           â”‚
â”‚  â”œâ”€â”€ æˆäº¤é‡å¯†é›†åŒº (Volume Profile)                           â”‚
â”‚  â”œâ”€â”€ æ•´æ•°å…³å£ (90000, 95000, 100000...)                     â”‚
â”‚  â””â”€â”€ å†å²é‡è¦ä»·ä½                                            â”‚
â”‚                                                             â”‚
â”‚  Step 2: äº¤æ˜“éªŒè¯ (å¼ºåŒ–å­¦ä¹ )                                  â”‚
â”‚  â”œâ”€â”€ åœ¨å€™é€‰ä»·ä½é™„è¿‘å°è¯•äº¤æ˜“                                   â”‚
â”‚  â”œâ”€â”€ è®°å½•æ¯æ¬¡äº¤æ˜“ç»“æœ                                        â”‚
â”‚  â””â”€â”€ ç»Ÿè®¡è¯¥ä»·ä½çš„æœ‰æ•ˆæ€§                                       â”‚
â”‚                                                             â”‚
â”‚  Step 3: åŠ¨æ€æ›´æ–°                                            â”‚
â”‚  â”œâ”€â”€ æœ‰æ•ˆä»·ä½: æå‡æƒé‡ï¼Œçº³å…¥çŸ¥è¯†åº“                           â”‚
â”‚  â”œâ”€â”€ æ— æ•ˆä»·ä½: é™ä½æƒé‡ï¼Œé€æ¸æ·˜æ±°                             â”‚
â”‚  â”œâ”€â”€ æ–°ä»·ä½: ä»·æ ¼çªç ´åå½¢æˆæ–°çš„æ”¯æ’‘/é˜»åŠ›                      â”‚
â”‚  â””â”€â”€ æ—¶æ•ˆæ€§: é•¿æœŸæœªè§¦åŠçš„ä»·ä½é™ä½æƒé‡                         â”‚
â”‚                                                             â”‚
â”‚  Step 4: å¼ºåº¦è¯„ä¼°                                            â”‚
â”‚  â”œâ”€â”€ STRONG: æˆåŠŸç‡>70%, è§¦åŠ>5æ¬¡                           â”‚
â”‚  â”œâ”€â”€ MEDIUM: æˆåŠŸç‡50-70%, è§¦åŠ3-5æ¬¡                        â”‚
â”‚  â”œâ”€â”€ WEAK: æˆåŠŸç‡<50% æˆ– è§¦åŠ<3æ¬¡                           â”‚
â”‚  â””â”€â”€ äº¤æ˜“æ—¶ä¼˜å…ˆä½¿ç”¨STRONGçº§åˆ«çš„ä»·ä½                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ä»·ä½å­¦ä¹ çš„å¥–åŠ±è®¾è®¡

```python
def calculate_level_reward(trade, knowledge_base):
    """
    ä¸“é—¨é’ˆå¯¹æ”¯æ’‘é˜»åŠ›ä½å­¦ä¹ çš„å¥–åŠ±å‡½æ•°
    """
    reward = 0
    entry_price = trade.entry_price
    
    # æ‰¾åˆ°æœ€è¿‘çš„æ”¯æ’‘/é˜»åŠ›ä½
    nearest_support = find_nearest_level(entry_price, "SUPPORT", knowledge_base)
    nearest_resistance = find_nearest_level(entry_price, "RESISTANCE", knowledge_base)
    
    if trade.direction == "LONG":
        # åšå¤šæ—¶ï¼Œæ£€æŸ¥æ˜¯å¦åœ¨æ”¯æ’‘ä½é™„è¿‘å…¥åœº
        distance_to_support = (entry_price - nearest_support) / entry_price
        
        if distance_to_support < 0.005:  # è·ç¦»æ”¯æ’‘ä½0.5%ä»¥å†…
            if trade.is_win:
                reward += 0.1  # åœ¨æ”¯æ’‘ä½åšå¤šä¸”ç›ˆåˆ©ï¼Œå¼ºåŒ–è¿™ä¸ªä»·ä½
                update_level_stats(nearest_support, "bounce_success")
            else:
                reward -= 0.05  # åœ¨æ”¯æ’‘ä½åšå¤šä½†äºæŸï¼Œå¯èƒ½æ”¯æ’‘å¤±æ•ˆ
                update_level_stats(nearest_support, "bounce_fail")
    
    elif trade.direction == "SHORT":
        # åšç©ºæ—¶ï¼Œæ£€æŸ¥æ˜¯å¦åœ¨é˜»åŠ›ä½é™„è¿‘å…¥åœº
        distance_to_resistance = (nearest_resistance - entry_price) / entry_price
        
        if distance_to_resistance < 0.005:  # è·ç¦»é˜»åŠ›ä½0.5%ä»¥å†…
            if trade.is_win:
                reward += 0.1
                update_level_stats(nearest_resistance, "bounce_success")
            else:
                reward -= 0.05
                update_level_stats(nearest_resistance, "bounce_fail")
    
    return reward
```

---

## å››ã€æ¨¡å‹å­˜å‚¨ä¸è¿›åŒ–è¿­ä»£

### 4.1 å­˜å‚¨ç»“æ„

```
models/
â”œâ”€â”€ checkpoints/
â”‚   â”œâ”€â”€ model_gen001_20240101.pt    # ç¬¬1ä»£æ¨¡å‹
â”‚   â”œâ”€â”€ model_gen002_20240107.pt    # ç¬¬2ä»£æ¨¡å‹
â”‚   â”œâ”€â”€ model_gen003_20240114.pt    # ç¬¬3ä»£æ¨¡å‹
â”‚   â””â”€â”€ model_latest.pt             # æœ€æ–°æ¨¡å‹(è½¯é“¾æ¥)
â”‚
â”œâ”€â”€ knowledge/
â”‚   â”œâ”€â”€ knowledge_gen001.json       # ç¬¬1ä»£çŸ¥è¯†åº“
â”‚   â”œâ”€â”€ knowledge_gen002.json       # ç¬¬2ä»£çŸ¥è¯†åº“
â”‚   â””â”€â”€ knowledge_latest.json       # æœ€æ–°çŸ¥è¯†åº“
â”‚
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ trades/
â”‚   â”‚   â””â”€â”€ trades.db               # æ‰€æœ‰äº¤æ˜“è®°å½•
â”‚   â”œâ”€â”€ learning/
â”‚   â”‚   â””â”€â”€ events.out.tfevents.*   # TensorBoardæ—¥å¿—
â”‚   â””â”€â”€ evolution/
â”‚       â””â”€â”€ evolution_report.md     # è¿›åŒ–æŠ¥å‘Š
â”‚
â””â”€â”€ config/
    â””â”€â”€ hyperparams.yaml            # è¶…å‚æ•°é…ç½®
```

### 4.2 è¿›åŒ–è¿­ä»£æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¿›åŒ–è¿­ä»£æµç¨‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  æ¯Nç¬”äº¤æ˜“ æˆ– æ¯å‘¨ è§¦å‘ä¸€æ¬¡è¿›åŒ–è¯„ä¼°                            â”‚
â”‚                                                             â”‚
â”‚  Step 1: æ€§èƒ½è¯„ä¼°                                            â”‚
â”‚  â”œâ”€â”€ è®¡ç®—æœ€è¿‘Nç¬”äº¤æ˜“çš„æŒ‡æ ‡                                    â”‚
â”‚  â”‚   â”œâ”€â”€ èƒœç‡ (Win Rate)                                    â”‚
â”‚  â”‚   â”œâ”€â”€ ç›ˆäºæ¯” (Profit Factor)                             â”‚
â”‚  â”‚   â”œâ”€â”€ å¤æ™®æ¯”ç‡ (Sharpe Ratio)                            â”‚
â”‚  â”‚   â””â”€â”€ æœ€å¤§å›æ’¤ (Max Drawdown)                            â”‚
â”‚  â””â”€â”€ ä¸ä¸Šä¸€ä»£å¯¹æ¯”                                            â”‚
â”‚                                                             â”‚
â”‚  Step 2: çŸ¥è¯†åº“æ›´æ–°                                          â”‚
â”‚  â”œâ”€â”€ ç»Ÿè®¡å„ä»·ä½çš„æœ€æ–°è¡¨ç°                                     â”‚
â”‚  â”œâ”€â”€ æ·˜æ±°å¤±æ•ˆçš„æ”¯æ’‘é˜»åŠ›ä½                                     â”‚
â”‚  â”œâ”€â”€ æ·»åŠ æ–°å‘ç°çš„æœ‰æ•ˆä»·ä½                                     â”‚
â”‚  â””â”€â”€ æ›´æ–°å…¥åœºæ¨¡å¼çš„ç»Ÿè®¡æ•°æ®                                   â”‚
â”‚                                                             â”‚
â”‚  Step 3: æ¨¡å‹å†³ç­–                                            â”‚
â”‚  â”œâ”€â”€ å¦‚æœæ–°æ¨¡å‹æ›´å¥½:                                         â”‚
â”‚  â”‚   â”œâ”€â”€ ä¿å­˜ä¸ºæ–°ä¸€ä»£                                        â”‚
â”‚  â”‚   â”œâ”€â”€ ç»§æ‰¿å¹¶å¼ºåŒ–æœ‰æ•ˆç­–ç•¥                                   â”‚
â”‚  â”‚   â””â”€â”€ è®°å½•è¿›åŒ–æ—¥å¿—                                        â”‚
â”‚  â”œâ”€â”€ å¦‚æœæ–°æ¨¡å‹æ›´å·®:                                         â”‚
â”‚  â”‚   â”œâ”€â”€ å›æ»šåˆ°ä¸Šä¸€ä»£                                        â”‚
â”‚  â”‚   â”œâ”€â”€ å¢åŠ æ¢ç´¢ç‡ï¼Œå°è¯•æ–°ç­–ç•¥                               â”‚
â”‚  â”‚   â””â”€â”€ åˆ†æå¤±è´¥åŸå›                                         â”‚
â”‚  â””â”€â”€ å¦‚æœå·®ä¸å¤š:                                             â”‚
â”‚      â””â”€â”€ ç»§ç»­è®­ç»ƒï¼Œç§¯ç´¯æ›´å¤šæ•°æ®                               â”‚
â”‚                                                             â”‚
â”‚  Step 4: ç”Ÿæˆè¿›åŒ–æŠ¥å‘Š                                        â”‚
â”‚  â”œâ”€â”€ æœ¬ä»£ vs ä¸Šä»£ å¯¹æ¯”                                       â”‚
â”‚  â”œâ”€â”€ æœ€æœ‰æ•ˆçš„æ”¯æ’‘é˜»åŠ›ä½                                       â”‚
â”‚  â”œâ”€â”€ æœ€ä½³å…¥åœºæ¨¡å¼                                            â”‚
â”‚  â””â”€â”€ æ”¹è¿›å»ºè®®                                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 è¿›åŒ–æŠ¥å‘Šç¤ºä¾‹

```markdown
# è¿›åŒ–æŠ¥å‘Š - Generation 5

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | Gen 4 | Gen 5 | å˜åŒ– |
|------|-------|-------|------|
| èƒœç‡ | 52.3% | 56.8% | +4.5% âœ… |
| ç›ˆäºæ¯” | 1.42 | 1.58 | +0.16 âœ… |
| å¤æ™®æ¯”ç‡ | 1.1 | 1.4 | +0.3 âœ… |
| æœ€å¤§å›æ’¤ | 12.5% | 9.8% | -2.7% âœ… |
| äº¤æ˜“æ¬¡æ•° | 156 | 142 | -14 |

## ğŸ¯ æœ€æœ‰æ•ˆæ”¯æ’‘é˜»åŠ›ä½ (æœ¬å‘¨æœŸ)

| ä»·ä½ | ç±»å‹ | è§¦åŠ | æˆåŠŸç‡ | å¹³å‡ç›ˆåˆ© |
|------|------|------|--------|----------|
| 91,500 | æ”¯æ’‘ | 8æ¬¡ | 87.5% | +1.2% |
| 95,000 | é˜»åŠ› | 6æ¬¡ | 83.3% | +0.9% |
| 93,200 | æ”¯æ’‘ | 5æ¬¡ | 80.0% | +0.8% |

## ğŸ“ˆ æœ€ä½³å…¥åœºæ¨¡å¼

1. **æ”¯æ’‘ä½åå¼¹ + RSI<40 + è¶‹åŠ¿å‘ä¸Š**
   - èƒœç‡: 72%
   - å¹³å‡ç›ˆåˆ©: 1.8%
   - æ¨èä»“ä½: 50%

2. **é˜»åŠ›ä½åšç©º + RSI>60 + è¶‹åŠ¿å‘ä¸‹**
   - èƒœç‡: 68%
   - å¹³å‡ç›ˆåˆ©: 1.5%
   - æ¨èä»“ä½: 40%

## ğŸ”§ æœ¬ä»£æ”¹è¿›

- å­¦ä¼šäº†åœ¨å¼ºæ”¯æ’‘ä½åŠ å¤§ä»“ä½
- å‡å°‘äº†åœ¨éœ‡è¡åŒºé—´çš„æ— æ•ˆäº¤æ˜“
- æ­¢æŸä½ç½®æ›´åŠ åˆç†ï¼ˆATRçš„1.2å€ â†’ 1.5å€ï¼‰

## âš ï¸ å¾…æ”¹è¿›

- çªç ´äº¤æ˜“çš„èƒœç‡ä»ç„¶åä½ (45%)
- åœ¨é«˜æ³¢åŠ¨æœŸé—´ä»“ä½æ§åˆ¶éœ€è¦ä¼˜åŒ–
```

---

## äº”ã€ç®€åŒ–çš„å®ç°æ–¹æ¡ˆ

### 5.1 æ ¸å¿ƒå¾ªç¯

```python
class TradingAgent:
    def __init__(self):
        self.model = load_or_create_model()
        self.knowledge = load_or_create_knowledge()
        self.trade_log = TradeLogger()
        self.generation = self.knowledge.get("current_generation", 1)
    
    def run(self):
        """ä¸»å¾ªç¯"""
        while True:
            # 1. è·å–å¸‚åœºçŠ¶æ€
            state = self.get_market_state()
            
            # 2. æ¨¡å‹å†³ç­–
            action, confidence = self.model.decide(state, self.knowledge)
            
            # 3. æ‰§è¡Œäº¤æ˜“
            if action != "HOLD":
                trade = self.execute_trade(action, confidence)
                
                # 4. è®°å½•äº¤æ˜“
                self.trade_log.record(trade, state)
                
                # 5. æ›´æ–°çŸ¥è¯†åº“
                self.update_knowledge(trade)
            
            # 6. æ£€æŸ¥æ˜¯å¦éœ€è¦è¿›åŒ–
            if self.should_evolve():
                self.evolve()
            
            # 7. ç­‰å¾…ä¸‹ä¸€ä¸ªå†³ç­–ç‚¹
            time.sleep(60)  # æ¯åˆ†é’Ÿå†³ç­–ä¸€æ¬¡
    
    def evolve(self):
        """è¿›åŒ–è¿­ä»£"""
        # è¯„ä¼°å½“å‰æ€§èƒ½
        metrics = self.evaluate_performance()
        
        # ä¸ä¸Šä¸€ä»£å¯¹æ¯”
        if metrics.is_better_than(self.last_generation_metrics):
            # ä¿å­˜æ–°ä¸€ä»£
            self.save_generation()
            self.generation += 1
            print(f"ğŸ‰ è¿›åŒ–åˆ°ç¬¬ {self.generation} ä»£!")
        else:
            # å›æ»šæˆ–è°ƒæ•´
            self.adjust_strategy()
        
        # ç”ŸæˆæŠ¥å‘Š
        self.generate_evolution_report(metrics)
```

### 5.2 çŸ¥è¯†åº“æ›´æ–°

```python
def update_knowledge(self, trade):
    """æ¯ç¬”äº¤æ˜“åæ›´æ–°çŸ¥è¯†åº“"""
    
    # æ›´æ–°æ”¯æ’‘é˜»åŠ›ä½ç»Ÿè®¡
    if trade.entry_near_support:
        level = trade.nearest_support
        self.knowledge["price_levels"][level]["touch_count"] += 1
        if trade.is_win:
            self.knowledge["price_levels"][level]["bounce_count"] += 1
        self.recalculate_level_strength(level)
    
    # æ›´æ–°å…¥åœºæ¨¡å¼ç»Ÿè®¡
    pattern = trade.entry_pattern
    self.knowledge["entry_patterns"][pattern]["total_trades"] += 1
    if trade.is_win:
        self.knowledge["entry_patterns"][pattern]["wins"] += 1
    self.recalculate_pattern_stats(pattern)
    
    # ä¿å­˜çŸ¥è¯†åº“
    self.save_knowledge()
```

---

## å…­ã€å¯è¡Œæ€§åˆ†æ

### âœ… è¿™ä¸ªæ–¹æ¡ˆå¯è¡Œçš„åŸå› 

1. **æ”¯æ’‘é˜»åŠ›æ˜¯å¯å­¦ä¹ çš„**
   - å¸‚åœºç¡®å®å­˜åœ¨å¿ƒç†ä»·ä½å’ŒæŠ€æœ¯ä»·ä½
   - é€šè¿‡ç»Ÿè®¡å¯ä»¥å‘ç°å“ªäº›ä»·ä½æœ‰æ•ˆ
   - å¼ºåŒ–å­¦ä¹ å¯ä»¥è‡ªåŠ¨ä¼˜åŒ–åœ¨è¿™äº›ä»·ä½çš„äº¤æ˜“ç­–ç•¥

2. **èƒœç‡å’Œç›ˆäºæ¯”å¯ä»¥ä¼˜åŒ–**
   - é€šè¿‡è®°å½•æ¯ç§å…¥åœºæ¡ä»¶çš„ç»“æœ
   - æ·˜æ±°ä½æ•ˆæ¨¡å¼ï¼Œå¼ºåŒ–é«˜æ•ˆæ¨¡å¼
   - è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å¼ºåŒ–å­¦ä¹ é—®é¢˜

3. **æ—¥å¿—å’Œè¿›åŒ–æœºåˆ¶ä¿è¯æŒç»­æ”¹è¿›**
   - å®Œæ•´çš„äº¤æ˜“è®°å½•æ”¯æŒå¤ç›˜åˆ†æ
   - çŸ¥è¯†åº“ç§¯ç´¯ç»éªŒï¼Œé¿å…é‡å¤é”™è¯¯
   - è¿›åŒ–æœºåˆ¶ç¡®ä¿æ¨¡å‹è¶Šæ¥è¶Šå¥½

### âš ï¸ éœ€è¦æ³¨æ„çš„æŒ‘æˆ˜

1. **å¸‚åœºå˜åŒ–**
   - æ”¯æ’‘é˜»åŠ›ä½ä¼šå¤±æ•ˆ
   - éœ€è¦åŠ¨æ€æ›´æ–°ï¼Œæ·˜æ±°è¿‡æ—¶çš„ä»·ä½

2. **æ ·æœ¬é‡**
   - éœ€è¦è¶³å¤Ÿå¤šçš„äº¤æ˜“æ‰èƒ½å¾—å‡ºç»Ÿè®¡ç»“è®º
   - å»ºè®®è‡³å°‘100ç¬”äº¤æ˜“åå†åšè¿›åŒ–è¯„ä¼°

3. **è¿‡æ‹Ÿåˆé£é™©**
   - ä¸è¦è¿‡åº¦ä¾èµ–å†å²æ•°æ®
   - ä¿æŒä¸€å®šçš„æ¢ç´¢ç‡

---

## ä¸ƒã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **å®ç°äº¤æ˜“æ—¥å¿—ç³»ç»Ÿ** - è®°å½•æ¯ç¬”äº¤æ˜“
2. **å®ç°çŸ¥è¯†åº“** - å­˜å‚¨æ”¯æ’‘é˜»åŠ›ä½å’Œå…¥åœºæ¨¡å¼
3. **å®ç°åŸºç¡€Agent** - èƒ½å¤Ÿæ ¹æ®çŸ¥è¯†åº“åšå†³ç­–
4. **å®ç°è¿›åŒ–æœºåˆ¶** - å®šæœŸè¯„ä¼°å’Œæ›´æ–°
5. **æ¥å…¥æµ‹è¯•ç½‘** - å¼€å§‹å®ç›˜æ¨¡æ‹Ÿè®­ç»ƒ
